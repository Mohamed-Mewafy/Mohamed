<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Mohamed Esam - مطور Flutter</title>
  <link rel="stylesheet" href="src/styles.css">
  <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
  <header>
    <nav>
      <div class="menu-icon" id="menu-icon">
        <i class="fas fa-bars"></i>
      </div>
      <ul class="nav-list" id="nav-list">
        <li><a href="#home" data-key="home">الرئيسية</a></li>
        <li><a href="#about" data-key="about">نبذة عني</a></li>
        <li><a href="#skills" data-key="skills">مهاراتي</a></li>
        <li><a href="#projects" data-key="projects">أعمالي</a></li>
        <li><a href="#contact" data-key="contact">تواصل معي</a></li>
      </ul>
      <div class="controls">
        <button id="language-toggle" class="btn">English</button>
        <button id="theme-toggle" class="btn"><i class="fas fa-moon"></i></button>
      </div>
    </nav>
  </header>

  <section id="home" class="hero">
    <div class="hero-content animate__animated animate__fadeIn">
      <h1 data-key="welcome">مرحبًا، أنا محمد</h1>
      <h3 data-key="description" class="description">مطور Flutter</h3>
      <a href="#projects" class="btn" data-key="viewProjects">شاهد أعمالي</a>
    </div>
  </section>

  <section id="about" class="about">
    <h2 class="animate__animated" data-key="aboutMe">نبذة عني</h2>
    <div class="about-content">
      <p data-key="aboutDesc">
        أنا محمد، مطور Flutter وبرمجيات، لدي خبرة في تطوير تطبيقات الهاتف والويب باستخدام تقنيات حديثة مثل Flutter وPython. أحب تحويل الأفكار إلى واقع ملموس من خلال البرمجة والإبداع.
      </p>
    </div>
  </section>

  <section id="skills" class="skills">
    <h2 class="animate__animated" data-key="mySkills">مهاراتي</h2>
    <div class="skills-grid">
      <!-- مهارة Flutter -->
      <div class="skill-card animate__animated">
        <i class="fab fa-flutter"></i>
        <h3>Flutter</h3>
        <div class="progress-bar">
          <div class="progress" style="width: 85%;"></div>
        </div>
      </div>

      <!-- مهارة Python -->
      <div class="skill-card animate__animated">
        <i class="fab fa-python"></i>
        <h3>Python</h3>
        <div class="progress-bar">
          <div class="progress" style="width: 75%;"></div>
        </div>
      </div>

      <!-- مهارة Dart -->
      <div class="skill-card animate__animated">
        <i class="fas fa-code"></i>
        <h3>Dart</h3>
        <div class="progress-bar">
          <div class="progress" style="width: 80%;"></div>
        </div>
      </div>

      <!-- مهارة HTML -->
      <div class="skill-card animate__animated">
        <i class="fab fa-html5"></i>
        <h3>HTML</h3>
        <div class="progress-bar">
          <div class="progress" style="width: 90%;"></div>
        </div>
      </div>

      <!-- مهارة CSS -->
      <div class="skill-card animate__animated">
        <i class="fab fa-css3-alt"></i>
        <h3>CSS</h3>
        <div class="progress-bar">
          <div class="progress" style="width: 85%;"></div>
        </div>
      </div>

      <!-- مهارة JavaScript -->
      <div class="skill-card animate__animated">
        <i class="fab fa-js-square"></i>
        <h3>JavaScript</h3>
        <div class="progress-bar">
          <div class="progress" style="width: 70%;"></div>
        </div>
      </div>
    </div>
  </section>

  <section id="projects" class="projects">
    <h2 class="animate__animated" data-key="myProjects">أعمالي</h2>
    <div class="project-grid" id="projects-container">
      <!-- سيتم ملء هذا القسم ديناميكيًا باستخدام JavaScript -->
    </div>
  </section>

  <section id="contact" class="contact">
    <h2 class="animate__animated" data-key="contactMe">تواصل معي</h2>
    <div class="social-links">
      <a href="https://wa.me/966547940660" target="_blank" class="btn whatsapp-btn">
        <i class="fab fa-whatsapp"></i> <span data-key="whatsapp">واتساب</span>
      </a>
      <a href="https://www.facebook.com/share/1D42VYELsL/" target="_blank" class="btn facebook-btn">
        <i class="fab fa-facebook"></i> <span data-key="facebook">فيسبوك</span>
      </a>
      <a href="https://github.com/yourusername" target="_blank" class="btn github-btn">
        <i class="fab fa-github"></i> <span data-key="github">GitHub</span>
      </a>
    </div>
  </section>

  <footer>
    <p data-key="footerText">© 2023 محمد. جميع الحقوق محفوظة.</p>
  </footer>

  <button id="back-to-top" title="العودة إلى الأعلى"><i class="fas fa-arrow-up"></i></button>

  <script>
    // دالة لجلب البيانات من الـ API
    async function fetchProjects() {
      try {
        const response = await fetch('http://localhost:3000/api/projects');
        
        // تحقق من حالة الاستجابة (Response Status)
        if (!response.ok) {
          throw new Error('فشل جلب البيانات: ' + response.statusText);
        }

        const projects = await response.json();
        displayProjects(projects);
      } catch (error) {
        console.error('Error fetching projects:', error);
        document.getElementById('projects-container').innerHTML = '<p>حدث خطأ أثناء جلب البيانات. الرجاء المحاولة مرة أخرى لاحقًا.</p>';
      }
    }

    // دالة لعرض المشاريع في الصفحة
    function displayProjects(projects) {
      const container = document.getElementById('projects-container');
      container.innerHTML = ''; // مسح المحتوى القديم

      if (projects.length === 0) {
        container.innerHTML = '<p>لا توجد مشاريع لعرضها.</p>';
        return;
      }

      projects.forEach((project) => {
        const projectCard = `
          <div class="project-card animate__animated">
            <div class="project-image">
              <img src="${project.image}" alt="${project.title}">
              <div class="overlay">
                <a href="#" class="view-btn" data-key="viewProject">عرض المشروع</a>
              </div>
            </div>
            <h3>${project.title}</h3>
            <p>${project.description}</p>
          </div>
        `;
        container.insertAdjacentHTML('beforeend', projectCard);
      });
    }

    // جلب البيانات عند تحميل الصفحة
    window.onload = fetchProjects;
  </script>
  <script src="src/script.js"></script>
</body>
</html>
